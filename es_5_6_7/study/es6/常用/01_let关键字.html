<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>01_let关键字</title>
</head>
<body>

<button>测试1</button>
<br>
<button>测试2</button>
<br>
<button>测试3</button>
<br>
<!--
***let
1. 作用:
  * 与var类似, 用于声明一个变量
2. 特点:
  * 在块作用域内有效
  * 不能重复声明
  * 不会预处理, 不存在变量提升
3. 应用:
  * 循环遍历加监听
  * 使用let取代var是趋势
-->
<script type="text/javascript">
    //let不存在变量提升，在声明之前，不能使用let定义的变量和函数
    //console.log(username);
    let username = 'kobe';
    //let不能重复定义，如果重复定义，控制台会报错
    //let username = 'wade';
    console.log(username);

    let btns = document.getElementsByTagName('button');
    //let有自己的块级作用域，所以按钮的点击事件回调函数中，获取的i就是每次遍历的i
    //如果换成var声明i，则每次都拿到都是3，因为回调函数回调时拿到的是最后遍历的值，就是3
    //如果不用let，就要使用闭包，因为闭包是使用一个立即执行函数，通过将i作为立即执行函数的实参传入，因为函数有自己作用域，就可以保证i的值是每次遍历的值
    for (let i = 0; i < btns.length; i++) {
        var btn = btns[i];
        btn.onclick = function () {
            alert(i)
        };
    }
    //使用闭包的方式，解决问题
    // for (var i = 0; i < btns.length; i++) {
    //     var btn = btns[i];
    //     (function (i) {
    //         btn.onclick = function () {
    //             alert(i)
    //         };
    //     })(i);
    // }
</script>
</body>
</html>